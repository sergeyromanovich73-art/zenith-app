<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --blue: #00f3ff; --bg: #020205; --card: rgba(255,255,255,0.05); }
        body { 
            background: var(--bg); color: white; font-family: sans-serif; 
            display: flex; flex-direction: column; align-items: center; 
            height: 100vh; margin: 0; overflow: hidden; justify-content: space-between; 
            padding: 40px 0 90px 0; box-sizing: border-box; 
        }

        /* –°—á–µ—Ç */
        #score { font-size: 60px; font-weight: 900; text-shadow: 0 0 20px var(--blue); }

        /* –ì–õ–ê–í–ù–ê–Ø –ö–ù–û–ü–ö–ê (–ö–∞–∫ –≤ —Å–∞–º–æ–π –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏) */
        #main-btn { 
            width: 240px; height: 240px; border-radius: 50%; 
            background: radial-gradient(circle, var(--blue) 0%, transparent 70%); 
            border: 4px solid var(--blue); display: flex; align-items: center; 
            justify-content: center; font-size: 110px; touch-action: manipulation; 
            transition: transform 0.05s; -webkit-tap-highlight-color: transparent;
            outline: none; z-index: 5;
        }
        #main-btn:active { transform: scale(0.92); }

        /* –≠–Ω–µ—Ä–≥–∏—è */
        .energy-box { width: 85%; text-align: center; }
        .en-bar { width: 100%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; overflow: hidden; }
        #en-fill { width: 100%; height: 100%; background: var(--blue); }

        /* –ú–µ–Ω—é (–û–≤–µ—Ä–ª–µ–∏) */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(2, 2, 5, 0.98); z-index: 100; display: none; flex-direction: column; align-items: center; padding-top: 50px; }
        .card { background: var(--card); border: 1px solid rgba(0,243,255,0.2); width: 90%; padding: 15px; border-radius: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .btn-act { background: var(--blue); color: #000; border: none; padding: 10px 15px; border-radius: 10px; font-weight: bold; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav { position: fixed; bottom: 0; width: 100%; height: 80px; display: flex; background: #0a0a0f; border-top: 1px solid rgba(0,243,255,0.3); z-index: 200; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 11px; color: #555; background: none; border: none; outline: none; }
        .nav-item.active { color: var(--blue); }
    </style>
</head>
<body>

    <div id="score">0</div>

    <button id="main-btn">Z</button>

    <div class="energy-box">
        <div class="en-bar"><div id="en-fill"></div></div>
        <div style="margin-top:8px; font-size:14px;">‚ö° <span id="en-val">1000</span> / 1000</div>
    </div>

    <div id="shop-ui" class="overlay">
        <h2 style="color:var(--blue)">BOOSTS</h2>
        <div class="card"><div>Multi-tap</div><button class="btn-act" onclick="buy('pow')">UPGRADE</button></div>
        <button onclick="closeAll()" style="color:red; background:none; border:none; margin-top:20px;">–ó–ê–ö–†–´–¢–¨</button>
    </div>

    <div id="tasks-ui" class="overlay">
        <h2 style="color:var(--blue)">TASKS</h2>
        <div class="card"><div>Zenith Forum</div><button class="btn-act" onclick="tg.openTelegramLink('https://t.me/zenith_forum')">GO</button></div>
        <button onclick="closeAll()" style="color:red; background:none; border:none; margin-top:20px;">–ó–ê–ö–†–´–¢–¨</button>
    </div>

    <div class="nav">
        <button class="nav-item active" onclick="closeAll()">üí∞<br>MINE</button>
        <button class="nav-item" onclick="openUI('shop-ui')">üöÄ<br>BOOSTS</button>
        <button class="nav-item" onclick="openUI('tasks-ui')">üìã<br>TASKS</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let bal = parseFloat(localStorage.getItem('zen_bal')) || 0;
        let en = 1000;
        let pow = 1;

        function refresh() {
            document.getElementById('score').innerText = Math.floor(bal).toLocaleString();
            document.getElementById('en-val').innerText = en;
            document.getElementById('en-fill').style.width = (en/10) + "%";
            localStorage.setItem('zen_bal', bal);
        }

        function openUI(id) {
            document.querySelectorAll('.overlay').forEach(el => el.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
        }

        function closeAll() {
            document.querySelectorAll('.overlay').forEach(el => el.style.display = 'none');
        }

        function buy(type) {
            if(bal >= 500) {
                bal -= 500;
                pow++;
                tg.showAlert("–£–ª—É—á—à–µ–Ω–æ!");
                refresh();
            }
        }

        // –¢–û–¢ –°–ê–ú–´–ô –†–ê–ë–û–ß–ò–ô –ö–õ–ò–ö
        document.getElementById('main-btn').addEventListener('touchstart', (e) => {
            e.preventDefault();
            if(en >= pow) {
                bal += pow;
                en -= pow;
                tg.HapticFeedback.impactOccurred('medium');
                refresh();
            }
        });

        setInterval(() => { if(en < 1000) { en++; refresh(); } }, 1500);
        refresh();
    </script>
</body>
</html>
